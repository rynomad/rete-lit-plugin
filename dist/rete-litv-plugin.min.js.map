{"version":3,"file":"rete-litv-plugin.min.js","sources":["../src/renderer.ts","../src/presets/classic/components/Connection.ts","../src/presets/classic/components/ConnectionWrapper.ts","../src/presets/classic/vars.ts","../src/presets/classic/components/Control.ts","../src/presets/classic/components/Node.ts","../src/presets/classic/components/Socket.ts","../src/presets/classic/index.ts","../src/presets/context-menu/context-vars.ts","../src/presets/context-menu/utils/debounce.ts","../src/presets/context-menu/components/Block.ts","../src/presets/context-menu/components/Item.ts","../src/presets/context-menu/components/Search.ts","../src/presets/context-menu/components/Menu.ts","../src/presets/context-menu/index.ts","../src/presets/minimap/utils.ts","../src/presets/minimap/MiniNode.ts","../src/presets/minimap/MiniViewport.ts","../src/shared/drag.ts","../node_modules/fast-equals/dist/esm/index.mjs","../src/presets/minimap/Minimap.ts","../src/presets/minimap/index.ts","../src/presets/reroute/Pins.ts","../src/presets/reroute/index.ts","../node_modules/tslib/tslib.es6.js","../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","../node_modules/rxjs/dist/esm5/internal/Subscription.js","../node_modules/rxjs/dist/esm5/internal/config.js","../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","../node_modules/rxjs/dist/esm5/internal/util/noop.js","../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","../node_modules/rxjs/dist/esm5/internal/Subscriber.js","../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","../node_modules/rxjs/dist/esm5/internal/util/identity.js","../node_modules/rxjs/dist/esm5/internal/Observable.js","../node_modules/rxjs/dist/esm5/internal/util/pipe.js","../node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","../node_modules/rxjs/dist/esm5/internal/Subject.js","../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js","../src/presets/classic/components/Transformer.ts","../src/presets/classic/components/TransformerNode.ts","../src/Ref.ts","../src/index.ts"],"sourcesContent":["import { LitElement } from 'lit'\n\ntype Instance<P> = { app: LitElement; payload: P }\n\nfunction setProps(element: LitElement, payload: Record<string, any>) {\n  for (const key of Object.keys(payload)) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    element[key] = payload[key]\n  }\n}\n\nexport function create<P extends Record<string, any>>(\n  element: Element,\n  component: any,\n  payload: P,\n  onRendered: any\n): Instance<P> {\n  const state = payload\n\n  const app = new component()\n\n  app.addEventListener('updated', () => {\n    onRendered()\n  })\n\n  setProps(app, payload)\n\n  element.appendChild(app)\n\n  onRendered()\n\n  return {\n    app,\n    payload: state\n  }\n}\n\nexport function update<P extends object>(instance: Instance<P>, payload: P) {\n  instance.payload = { ...instance.payload, ...payload }\n  setProps(instance.app, instance.payload)\n  instance.app.requestUpdate()\n}\n\nexport function destroy(instance: Instance<unknown>) {\n  instance.app.remove()\n}\n\nexport type Renderer<I> = {\n    get(element: Element): I | undefined;\n    mount(\n        element: Element,\n        litComponent: any,\n        payload: object,\n        onRendered: any\n    ): I;\n    update(app: I, payload: object): void;\n    unmount(element: Element): void;\n}\n\nexport function getRenderer(): Renderer<Instance<object>> {\n  const instances = new Map<Element, Instance<object>>()\n\n  return {\n    get(element) {\n      return instances.get(element)\n    },\n    mount(element, litComponent, payload, onRendered) {\n      const app = create(element, litComponent, payload, onRendered)\n\n      instances.set(element, app)\n\n      return app\n    },\n    update(app, payload) {\n      update(app, payload)\n    },\n    unmount(element) {\n      const app = instances.get(element)\n\n      if (app) {\n        destroy(app)\n        instances.delete(element)\n      }\n    }\n  }\n}\n","import { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\n\n@customElement('connection-component')\nexport class Connection extends LitElement {\n  @property({ type: Object }) data = {}\n  @property({ type: Object }) start = {}\n  @property({ type: Object }) end = {}\n  @property({ type: String }) path = ''\n\n  static styles = css`\n    svg {\n      overflow: visible !important;\n      position: absolute;\n      pointer-events: none;\n      width: 9999px;\n      height: 9999px;\n    }\n    path {\n      fill: none;\n      stroke-width: 5px;\n      stroke: steelblue;\n      pointer-events: auto;\n    }\n  `\n\n  render() {\n    return html`\n      <svg data-testid=\"connection\">\n        <path d=${this.path}></path>\n      </svg>\n    `\n  }\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport { html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\n\n@customElement('connection-wrapper')\nexport class ConnectionWrapper extends LitElement {\n    @property({ type: Object }) component: any\n    @property({ type: Object }) data: any\n    @property({ type: Object }) start: any\n    @property({ type: Object }) end: any\n    @property({ type: Function }) path: Function = () => {\n      throw new Error('PATH FUNCTION NOT SET PROPERLY')\n    }\n\n    observedStart = { x: 0, y: 0 }\n    observedEnd = { x: 0, y: 0 }\n    observedPath = ''\n    onDestroy: Function | null = null\n\n    constructor() {\n      super()\n    }\n\n    connectedCallback() {\n      super.connectedCallback()\n      this.initializeWatchers()\n      this.fetchPath()\n    }\n\n    disconnectedCallback() {\n      if (this.onDestroy) this.onDestroy()\n      super.disconnectedCallback()\n    }\n\n    initializeWatchers() {\n      const unwatch1 =\n            typeof this.start === 'function' &&\n            this.start((pos: any) => {\n              this.observedStart = pos\n              this.fetchPath() // Fetch the new path when start changes\n            })\n\n      const unwatch2 =\n            typeof this.end === 'function' &&\n            this.end((pos: any) => {\n              this.observedEnd = pos\n              this.fetchPath() // Fetch the new path when end changes\n            })\n\n      this.onDestroy = () => {\n        unwatch1 && unwatch1()\n        unwatch2 && unwatch2()\n      }\n    }\n\n    async fetchPath() {\n      if (this.startPosition && this.endPosition) {\n        this.observedPath = await this.path(\n          this.startPosition,\n          this.endPosition\n        )\n        this.requestUpdate() // Request re-render\n      }\n    }\n\n    get startPosition() {\n      return this.start && 'x' in this.start\n        ? this.start\n        : this.observedStart\n    }\n\n    get endPosition() {\n      return this.end && 'x' in this.end ? this.end : this.observedEnd\n    }\n\n    render() {\n      if (this.component) {\n        const dynamicComponent = new this.component()\n\n        dynamicComponent.data = this.data\n        dynamicComponent.start = this.startPosition\n        dynamicComponent.end = this.endPosition\n        dynamicComponent.path = this.observedPath\n\n        return html`${dynamicComponent}`\n      }\n\n      return html``\n    }\n}\n","import { css } from 'lit'\nexport default css`:host {\n    --node-color: rgba(110, 136, 255, 0.8);\n    --node-color-selected: #ffd92c;\n    --group-color: rgba(15, 80, 255, 0.2);\n    --group-handler-size: 40px;\n    --group-handler-offset: -10px;\n    --socket-size: 24px;\n    --socket-margin: 6px;\n    --socket-color: #96b38a;\n    --node-width: 180px;\n}`\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { css, html, LitElement } from 'lit'\nimport { property } from 'lit/decorators'\nimport { ClassicPreset } from 'rete'\n\nimport vars from '../vars'\n\nexport class Control<T extends 'text' | 'number'> extends LitElement {\n  @property({ type: ClassicPreset.InputControl }) data: ClassicPreset.InputControl<T> | undefined\n  static styles = [vars, css`\n    input {\n      width: 100%;\n      border-radius: 30px;\n      background-color: white;\n      padding: 2px 6px;\n      border: 1px solid #999;\n      font-size: 110%;\n      box-sizing: border-box;\n    }\n  `]\n\n  render() {\n    return html`\n      <input\n        type=\"${this.data?.type}\"\n        .value=\"${this.data?.value}\"\n        ?readonly=\"${this.data?.readonly}\"\n        @input=\"${this.change}\"\n        @pointerdown=\"${this.stopEvent}\"\n      />\n    `\n  }\n\n  change(e: Event) {\n    const val = this.data?.type === 'number'\n      ? +(e.target as HTMLInputElement)?.value\n      : (e.target as HTMLInputElement)?.value\n\n    // @ts-ignore\n    this.data?.setValue(val)\n  }\n\n  stopEvent(e: Event) {\n    e.stopPropagation()\n  }\n}\n\ncustomElements.define('control-component', Control)\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\nimport { ClassicPreset } from 'rete'\nimport { Socket } from 'rete/_types/presets/classic'\n\nimport vars from '../vars'\n\nfunction sortByIndex(entries: any = []) {\n  entries.sort((a: any, b: any) => {\n    const ai = (a[1] && a[1].index) || 0\n    const bi = (b[1] && b[1].index) || 0\n\n    return ai - bi\n  })\n  return entries\n}\n\n@customElement('node-component')\nexport class Node extends LitElement {\n    @property({ type: Object }) data:\n      | ClassicPreset.Node\n        | undefined\n    @property({ type: Function }) emit = () => {\n      throw new Error('emit not set properly')\n    }\n    @property({ type: String }) seed = ''\n\n    nodeStyles() {\n      // @ts-ignore\n      return `width: ${this.data?.width || '100px'}; height: ${\n        // @ts-ignore\n        this.data?.height || '100px'\n      }`\n    }\n\n    inputs() {\n      // @ts-ignore\n      return sortByIndex(Object.entries(this.data?.inputs || {}))\n    }\n\n    controls() {\n      // @ts-ignore\n      return sortByIndex(Object.entries(this.data?.controls || {}))\n    }\n\n    outputs() {\n      // @ts-ignore\n      return sortByIndex(Object.entries(this.data?.outputs || {}))\n    }\n\n    static styles = [\n      vars,\n      css`\n            :host {\n                display: block;\n            }\n\n            .node {\n                background: var(--node-color);\n                border: 2px solid #4e58bf;\n                border-radius: 10px;\n                cursor: pointer;\n                box-sizing: border-box;\n                width: var(--node-width);\n                height: auto;\n                padding-bottom: 6px;\n                position: relative;\n                user-select: none;\n                line-height: initial;\n                font-family: Arial;\n            }\n\n            .node:hover {\n                background: linear-gradient(\n                        rgba(255, 255, 255, 0.04),\n                        rgba(255, 255, 255, 0.04)\n                    ),\n                    var(--node-color);\n            }\n\n            .node.selected {\n                background: var(--node-color-selected);\n                border-color: #e3c000;\n            }\n\n            .node .title {\n                color: white;\n                font-family: sans-serif;\n                font-size: 18px;\n                padding: 8px;\n            }\n\n            .node .output {\n                text-align: right;\n            }\n            .node .input {\n                text-alight: left;\n            }\n\n            .node .input-socket {\n                text-align: left;\n                margin-left: calc(\n                    (var(--socket-size) / -2) - var(--socket-margin)\n                );\n                display: inline-block;\n            }\n\n            .node .output-socket {\n                text-align: right;\n                margin-right: calc(\n                    (var(--socket-size) / -2) - var(--socket-margin)\n                );\n                display: inline-block;\n            }\n\n            .node .input-title,\n            .node .output-title {\n                vertical-align: middle;\n                color: white;\n                display: inline-block;\n                font-family: sans-serif;\n                font-size: 14px;\n                margin: var(--socket-margin);\n                line-height: var(--socket-size);\n            }\n\n            .node .input-control {\n                z-index: 1;\n                width: calc(\n                    100% - var(--socket-size) - 2 * var(--socket-margin)\n                );\n                vertical-align: middle;\n                display: inline-block;\n            }\n\n            .node .input-title[hidden],\n            .node .output-title[hidden] {\n                display: none;\n            }\n\n            .node .control {\n                padding: var(--socket-margin)\n                    calc(var(--socket-size) / 2 + var(--socket-margin));\n                display: block;\n                margin: -4px;\n            }\n        `\n    ]\n\n    render() {\n      return html`\n            <div\n                class=\"node ${this.data?.selected ? 'selected' : ''}\"\n                style=${this.nodeStyles()}\n                data-testid=\"node\"\n            >\n                <div class=\"title\" data-testid=\"title\">${this.data?.label}</div>\n\n                <!-- Outputs -->\n                ${this.outputs().map(\n    ([key, output]:\n                        | string\n                        | ClassicPreset.Output<Socket>[]) => html`\n                        <div class=\"output\" data-testid=\"output-${key}\">\n                            <div\n                                class=\"output-title\"\n                                data-testid=\"output-title\"\n                            >\n                                ${(output as ClassicPreset.Output<Socket>)\n    .label}\n                            </div>\n                            <ref-element\n                                class=\"output-socket\"\n                                .data=${{\n    type: 'socket',\n    side: 'output',\n    key: key,\n    nodeId: this.data?.id,\n    payload: (\n                                        output as ClassicPreset.Output<Socket>\n    ).socket\n  }}\n                                .emit=${this.emit}\n                                data-testid=\"output-socket\"\n                            ></ref-element>\n                        </div>\n                    `\n  )}\n\n                <!-- Controls -->\n                ${this.controls().map(\n    ([key, control]: string | ClassicPreset.Control[]) => html`\n                        <ref-element\n                            data-testid=\"control-${key}\"\n                            class=\"control\"\n                            .emit=${this.emit}\n                            .data=${{ type: 'control', payload: control }}\n                        ></ref-element>\n                    `\n  )}\n\n                <!-- Inputs -->\n                ${this.inputs().map(\n    ([key, input]:\n                        | string\n                        | ClassicPreset.Input<Socket>[]) => html`\n                        <div class=\"input\" data-testid=\"input-${key}\">\n                            <ref-element\n                                class=\"input-socket\"\n                                .data=${{\n    type: 'socket',\n    side: 'input',\n    key: key,\n    nodeId: this.data?.id,\n    payload: (\n                                        input as ClassicPreset.Input<Socket>\n    ).socket\n  }}\n                                .emit=${this.emit}\n                                data-testid=\"input-socket\"\n                            ></ref-element>\n                            <div\n                                class=\"input-title\"\n                                ?hidden=${(input as ClassicPreset.Input<Socket>)\n    .control &&\n                                (input as ClassicPreset.Input<Socket>)\n                                  .showControl}\n                                data-testid=\"input-title\"\n                            >\n                                ${(input as ClassicPreset.Input<Socket>).label}\n                            </div>\n                            <ref-element\n                                ?hidden=${!(\n                                    input as ClassicPreset.Input<Socket>\n  ).control &&\n                                (input as ClassicPreset.Input<Socket>)\n                                  .showControl}\n                                .emit=${this.emit}\n                                .data=${{\n    type: 'control',\n    payload: (\n                                        input as ClassicPreset.Input<Socket>\n    ).control\n  }}\n                                data-testid=\"input-control\"\n                                class=\"input-control\"\n                            ></ref-element>\n                        </div>\n                    `\n  )}\n            </div>\n        `\n    }\n}\n","import { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\nimport { ClassicPreset } from 'rete'\n\nimport vars from '../vars'\n\n@customElement('socket-component')\nexport class Socket extends LitElement {\n    @property({ type: ClassicPreset.Socket }) data:\n        | ClassicPreset.Socket\n        | undefined\n\n    static styles = [\n      vars,\n      css`\n            :host {\n                display: inline-block;\n                cursor: pointer;\n                border: 1px solid white;\n                border-radius: calc(var(--socket-size) / 2);\n                width: var(--socket-size);\n                height: var(--socket-size);\n                margin: var(--socket-margin);\n                vertical-align: middle;\n                background: var(--socket-color);\n                z-index: 2;\n                box-sizing: border-box;\n            }\n            :host(:hover) {\n                border-width: 4px;\n            }\n            :host(.multiple) {\n                border-color: yellow;\n            }\n            :host(.output) {\n                margin-right: calc(var(--socket-size) / -2);\n            }\n            :host(.input) {\n                margin-left: calc(var(--socket-size) / -2);\n            }\n        `\n    ]\n\n    // Define the click handler function\n    handleClick() {\n      // eslint-disable-next-line\n      console.log('Socket has been clicked')\n    }\n\n    render() {\n      return html`\n            <div\n                class=\"socket\"\n                title=\"${this.data?.name}\"\n                @click=\"${this.handleClick}\"\n            ></div>\n        `\n    }\n}\n","import { LitElement } from 'lit'\nimport { ClassicPreset, Scope } from 'rete'\nimport { classicConnectionPath, getDOMSocketPosition, loopConnectionPath, SocketPositionWatcher } from 'rete-render-utils'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport { Connection } from './components/Connection'\nimport { ConnectionWrapper } from './components/ConnectionWrapper'\nimport { Control } from './components/Control'\nimport { Node } from './components/Node'\nimport { Socket } from './components/Socket'\nimport { ClassicScheme, ExtractPayload, LitArea2D } from './types'\n\nexport { Connection } from './components/Connection'\nexport { Control } from './components/Control'\nexport { Node } from './components/Node'\nexport { Socket } from './components/Socket'\n\ntype Component<Props extends Record<string, any>> =\n  | typeof LitElement\n  | { new(): LitElement & Props }\n\ntype CustomizationProps<Schemes extends ClassicScheme> = {\n  node?: (data: ExtractPayload<Schemes, 'node'>) => Component<any> | null\n  connection?: (data: ExtractPayload<Schemes, 'connection'>) => Component<any> | null\n  socket?: (data: ExtractPayload<Schemes, 'socket'>) => Component<any> | null\n  control?: (data: ExtractPayload<Schemes, 'control'>) => Component<any> | null\n}\ntype ClassicProps<Schemes extends ClassicScheme, K> = {\n  socketPositionWatcher?: SocketPositionWatcher<Scope<never, [K]>>,\n  customize?: CustomizationProps<Schemes>\n}\n\n/**\n * Classic preset for rendering nodes, connections, controls and sockets.\n */\nexport function setup<Schemes extends ClassicScheme, K extends LitArea2D<Schemes>>(\n  props?: ClassicProps<Schemes, K>\n): RenderPreset<Schemes, K> {\n  const positionWatcher = typeof props?.socketPositionWatcher === 'undefined'\n    ? getDOMSocketPosition<Schemes, K>()\n    : props?.socketPositionWatcher\n  const { node, connection, socket, control } = props?.customize || {}\n\n  return {\n    attach(plugin) {\n      positionWatcher.attach(plugin as unknown as Scope<never, [K]>)\n    },\n    update(context, plugin) {\n      const { payload } = context.data\n      const parent = plugin.parentScope()\n\n      if (!parent) throw new Error('parent')\n      const emit = parent.emit.bind(parent)\n\n      if (context.data.type === 'node') {\n        return { data: payload, emit }\n      } else if (context.data.type === 'connection') {\n        const { start, end } = context.data\n\n        return {\n          data: payload,\n          ...(start ? { start } : {}),\n          ...(end ? { end } : {})\n        }\n      }\n      return { data: payload }\n    },\n    // eslint-disable-next-line max-statements, complexity\n    render(context, plugin) {\n      const parent = plugin.parentScope()\n      const emit = parent.emit.bind(parent)\n\n      if (context.data.type === 'node') {\n        const component = node ? node(context.data) : Node\n\n        return component && {\n          component, props: {\n            data: context.data.payload,\n            emit\n          }\n        }\n      } else if (context.data.type === 'connection') {\n        const component = connection ? connection(context.data) : Connection\n        const { payload } = context.data\n        const { source, target, sourceOutput, targetInput } = payload\n\n        return component && {\n          component: ConnectionWrapper, props: {\n            data: context.data.payload,\n            component,\n            start: context.data.start || ((change: any) => positionWatcher.listen(source, 'output', sourceOutput, change)),\n            end: context.data.end || ((change: any) => positionWatcher.listen(target, 'input', targetInput, change)),\n            path: async (start: Position, end: Position) => {\n              const response = await plugin.emit({ type: 'connectionpath', data: { payload, points: [start, end] } })\n\n              if (!response) return ''\n\n              const { path, points } = response.data\n              const curvature = 0.3\n\n              if (!path && points.length !== 2) throw new Error('cannot render connection with a custom number of points')\n              if (!path) return payload.isLoop\n                ? loopConnectionPath(points as [Position, Position], curvature, 120)\n                : classicConnectionPath(points as [Position, Position], curvature)\n\n              return path\n            }\n          }\n        }\n      } else if (context.data.type === 'socket') {\n        const { payload } = context.data\n        const component = socket ? socket(context.data) : Socket\n\n        return {\n          component, props: {\n            data: payload\n          }\n        }\n      } else if (context.data.type === 'control') {\n        const { payload } = context.data\n\n        if (control) {\n          const component = control(context.data)\n\n          return component && {\n            component, props: {\n              data: payload\n            }\n          }\n        }\n\n        return context.data.payload instanceof ClassicPreset.InputControl\n          ? {\n            component: Control, props: {\n              data: payload\n            }\n          }\n          : null\n      }\n    }\n  }\n}\n","import { css } from 'lit'\nexport default css`:host {\n    --context-color: rgba(110, 136, 255, 0.8);\n    --context-color-light: rgba(130, 153, 255, 0.8);\n    --context-color-dark: rgba(69, 103, 255, 0.8);\n    --context-menu-round: 5px;\n    --width: 120px;\n    --test: 23px;\n}`\n","export function debounce(delay: number, cb: () => void) {\n  return {\n    timeout: null as null | number,\n    cancel() {\n      if (this.timeout) {\n        window.clearTimeout(this.timeout)\n        this.timeout = null\n      }\n    },\n    call() {\n      this.timeout = window.setTimeout(() => {\n        cb()\n      }, delay)\n    }\n  }\n}\n","import '../context-vars'\n\nimport { css, html, LitElement } from 'lit'\nimport { customElement } from 'lit/decorators'\n\nimport vars from '../context-vars'\n\n@customElement('block-component')\nexport class Block extends LitElement {\n  static styles = [vars, css`\n    :host {\n      color: #fff;\n      padding: 4px;\n      border-bottom: 1px solid var(--context-color-dark);\n      background-color: var(--context-color);\n      cursor: pointer;\n      box-sizing: border-box;\n      width: 100%;\n      position: relative;\n    }\n\n    :host(:first-child) {\n      border-top-left-radius: var(--context-menu-round);\n      border-top-right-radius: var(--context-menu-round);\n    }\n\n    :host(:last-child) {\n      border-bottom-left-radius: var(--context-menu-round);\n      border-bottom-right-radius: var(--context-menu-round);\n    }\n\n    :host(:hover) {\n      background-color: var(--context-color-light);\n    }\n  `]\n\n  render() {\n    return html`\n      <slot></slot>\n    `\n  }\n}\n","import './Block'\n\nimport { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\n\nimport vars from '../context-vars'\nimport { Item as ItemType } from '../types'\nimport { debounce } from '../utils/debounce'\n\n@customElement('item-component')\nexport class Item extends LitElement {\n  @property({ type: Array }) subitems: ItemType[] = []\n  @property({ type: Number }) delay = 0\n  @property({ type: Boolean }) visibleSubitems = false\n  hide: any\n\n  constructor() {\n    super()\n    this.hide = debounce(this.delay, this.hideSubitems.bind(this))\n  }\n\n  hideSubitems() {\n    this.visibleSubitems = false\n  }\n\n  render() {\n    return html`\n      <block-component class=\"block ${this.subitems ? 'hasSubitems' : ''}\" data-testid=\"context-menu-item\">\n        <div \n          class=\"content\"\n          @click=\"${(event: Event) => { this.dispatchEvent(new CustomEvent('select', { detail: event })); this.dispatchEvent(new CustomEvent('hide')) }}\"\n          @wheel=\"${(event: Event) => event.stopPropagation()}\"\n          @pointerover=\"${() => { this.hide.cancel(); this.visibleSubitems = true }}\"\n          @pointerleave=\"${() => this.hide.call(this)}\"\n          @pointerdown=\"${(event: Event) => event.stopPropagation()}\"\n        >\n          <slot></slot>\n          ${this.subitems && this.visibleSubitems ? html`\n            <div class=\"subitems\">\n              ${this.subitems.map((item) => html`\n                <item-component\n                  @select=\"${(event: Event) => item.handler(event)}\"\n                  .delay=\"${this.delay}\"\n                  @hide=\"${() => this.dispatchEvent(new CustomEvent('hide'))}\"\n                  .subitems=\"${item.subitems}\"\n                >${item.label}</item-component>\n              `)}\n            </div>\n          ` : ''}\n        </div>\n      </block-component>\n    `\n  }\n\n  static styles = [vars, css`\n\n    .block {\n      padding: 0;\n    }\n\n    .content {\n      padding: 4px;\n      background-color: var(--context-color);\n    }\n\n    .hasSubitems:after {\n      content: '►';\n      position: absolute;\n      opacity: 0.6;\n      right: 5px;\n      top: 5px;\n    }\n\n    .subitems {\n      position: absolute;\n      top: 0;\n      left: 100%;\n      width: var(--width);\n    }\n  `]\n}\n","import { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\n\n@customElement('search-component')\nexport class Search extends LitElement {\n  @property({ type: String }) text = ''\n\n  static styles = css`\n    .search {\n      color: white;\n      padding: 1px 8px;\n      border: 1px solid white;\n      border-radius: 10px;\n      font-size: 16px;\n      font-family: serif;\n      width: 100%;\n      box-sizing: border-box;\n      background: transparent;\n    }\n  `\n\n  render() {\n    return html`\n      <input class=\"search\" \n        .value=\"${this.text}\" \n        @input=\"${this.handleInput}\" \n        data-testid=\"context-menu-search-input\">\n      </input>\n    `\n  }\n\n  handleInput(e: Event) {\n    this.text = (e.target as HTMLInputElement).value\n    this.dispatchEvent(new CustomEvent('change', { detail: this.text }))\n  }\n}\n","import { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\n\nimport vars from '../context-vars'\nimport { Item } from '../types'\nimport { debounce } from '../utils/debounce'\n\n@customElement('menu-component')\nexport class Menu extends LitElement {\n  @property({ type: Array }) items: Item[] = []\n  @property({ type: Number }) delay = 0\n  @property({ type: Boolean }) searchBar = false\n  // eslint-disable-next-line\n  @property({ type: Function }) onHide = () => { }\n  @property({ type: String }) seed = ''\n  @property({ type: String }) filter = ''\n\n  hide: any\n\n  constructor() {\n    super()\n    this.hide = debounce(this.delay, this.onHide)\n  }\n\n  getItems() {\n    const filterRegexp = new RegExp(this.filter, 'i')\n    const filteredList = this.items.filter(item => (\n      item.label.match(filterRegexp)\n    ))\n\n    return filteredList\n  }\n\n  connectedCallback() {\n    super.connectedCallback()\n  }\n\n  disconnectedCallback() {\n    if (this.hide) this.hide.cancel()\n    super.disconnectedCallback()\n  }\n\n  render() {\n    return html`\n        <div\n            class=\"menu\"\n            @mouseover=\"${this.hide.cancel}\"\n            @mouseleave=\"${this.hide.call}\"\n            data-testid=\"context-menu\"\n            rete-context-menu\n        >\n            ${this.searchBar\n    ? html`\n                      <block-component>\n                          <search-component\n                              .text=\"${this.filter}\"\n                              @change=\"${(e: Event) =>\n    (this.filter = (e as CustomEvent).detail)}\"\n                          ></search-component>\n                      </block-component>\n                  `\n    : ''}\n            ${this.getItems().map(\n    (item) => html`\n                    <item-component\n                        @select=\"${item.handler}\"\n                        .delay=\"${this.delay}\"\n                        @hide=\"${this.onHide}\"\n                        .subitems=\"${item.subitems}\"\n                    >\n                        ${item.label}\n                    </item-component>\n                `\n  )}\n        </div>\n    `\n  }\n\n  static styles =[vars, css`\n\n    .menu {\n      padding: 10px;\n      width: var(--width);\n      margin-top: -20px;\n      margin-left: calc(var(--width) / -2);\n    }\n  `]\n}\n","import './components/Item'\nimport './components/Block'\nimport './components/Search'\n\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Menu } from './components/Menu'\nimport { ContextMenuRender } from './types'\n\nexport function setup<Schemes extends BaseSchemes, K extends ContextMenuRender>(props?: { delay?: number }): RenderPreset<Schemes, K> {\n  const delay = typeof props?.delay === 'undefined' ? 1000 : props.delay\n\n  return {\n    update(context) {\n      if (context.data.type === 'contextmenu') {\n        return {\n          items: context.data.items,\n          delay,\n          searchBar: context.data.searchBar,\n          onHide: context.data.onHide\n        }\n      }\n    },\n    render(context) {\n      if (context.data.type === 'contextmenu') {\n        return {\n          component: Menu,\n          props: {\n            items: context.data.items,\n            delay,\n            searchBar: context.data.searchBar,\n            onHide: context.data.onHide\n          }\n        }\n      }\n    }\n  }\n}\n","export function px(value: number) {\n  return `${value}px`\n}\n","import { css, html, LitElement } from 'lit'\nimport { property } from 'lit/decorators'\nimport { styleMap } from 'lit/directives/style-map'\n\nimport { px } from './utils'\n\nexport type MiniNodeType = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n}\n\nexport class MiniNode extends LitElement {\n  @property({ type: Number }) left = 0\n  @property({ type: Number }) top = 0\n  @property({ type: Number }) width = 0\n  @property({ type: Number }) height = 0\n\n  static styles = css`\n    .mini-node {\n      position: absolute;\n      background: rgba(110, 136, 255, 0.8);\n      border: 1px solid rgb(192 206 212 / 60%);\n    }\n  `\n\n  get styles() {\n    return {\n      left: px(this.left),\n      top: px(this.top),\n      width: px(this.width),\n      height: px(this.height)\n    }\n  }\n\n  render() {\n    return html`\n      <div class=\"mini-node\" style=${styleMap(this.styles)}></div>\n    `\n  }\n}\n\ncustomElements.define('mini-node', MiniNode)\n","import { css, html, LitElement } from 'lit'\nimport { property } from 'lit/decorators'\n\nimport { useDrag } from '../../shared/drag'\nimport { px } from './utils'\n\nexport class MiniViewport extends LitElement {\n  @property({ type: Number }) left = 0\n  @property({ type: Number }) top = 0\n  @property({ type: Number }) width = 0\n  @property({ type: Number }) height = 0\n  @property({ type: Number }) containerWidth = 0\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  @property({ type: Function }) reTranslate = (_x: any, _y: any) => { throw new Error('TRANSLATE NOT SET PROPERLY IN MiniViewport')}\n\n  drag = useDrag(this.onDrag, e => ({ x: e.pageX, y: e.pageY }))\n\n  scale(v: number) {\n    return v * this.containerWidth\n  }\n\n  invert(v: number) {\n    return v / this.containerWidth\n  }\n\n  onDrag(dx: number, dy: number) {\n    this.reTranslate(this.invert(-dx), this.invert(-dy))\n  }\n\n  get styles() {\n    return {\n      left: px(this.scale(this.left)),\n      top: px(this.scale(this.top)),\n      width: px(this.scale(this.width)),\n      height: px(this.scale(this.height))\n    }\n  }\n\n  render() {\n    return html`\n      <div\n        class=\"mini-viewport\"\n        @pointerdown=${this.drag.start}\n        style=${this.styles}\n        data-testid=\"minimap-viewport\"\n      ></div>\n    `\n  }\n\n  static styles = css`\n    .mini-viewport {\n      position: absolute;\n      background: rgba(255, 251, 128, 0.32);\n      border: 1px solid #ffe52b;\n    }\n  `\n}\n\ncustomElements.define('mini-viewport', MiniViewport)\n","import { Position } from '../types'\n\ntype Translate = (dx: number, dy: number) => void\ntype StartEvent = { pageX: number, pageY: number }\n\nexport function useDrag(translate: Translate, getPointer: (e: StartEvent) => Position) {\n  return {\n    start(e: StartEvent) {\n      let previous = { ...getPointer(e) }\n\n      function move(moveEvent: MouseEvent) {\n        const current = { ...getPointer(moveEvent) }\n        const dx = current.x - previous.x\n        const dy = current.y - previous.y\n\n        previous = current\n\n        translate(dx, dy)\n      }\n      function up() {\n        window.removeEventListener('pointermove', move)\n        window.removeEventListener('pointerup', up)\n        window.removeEventListener('pointercancel', up)\n      }\n\n      window.addEventListener('pointermove', move)\n      window.addEventListener('pointerup', up)\n      window.addEventListener('pointercancel', up)\n    }\n  }\n}\n","var getOwnPropertyNames = Object.getOwnPropertyNames, getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Combine two comparators into a single comparators.\n */\nfunction combineComparators(comparatorA, comparatorB) {\n    return function isEqual(a, b, state) {\n        return comparatorA(a, b, state) && comparatorB(a, b, state);\n    };\n}\n/**\n * Wrap the provided `areItemsEqual` method to manage the circular state, allowing\n * for circular references to be safely included in the comparison without creating\n * stack overflows.\n */\nfunction createIsCircular(areItemsEqual) {\n    return function isCircular(a, b, state) {\n        if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {\n            return areItemsEqual(a, b, state);\n        }\n        var cache = state.cache;\n        var cachedA = cache.get(a);\n        var cachedB = cache.get(b);\n        if (cachedA && cachedB) {\n            return cachedA === b && cachedB === a;\n        }\n        cache.set(a, b);\n        cache.set(b, a);\n        var result = areItemsEqual(a, b, state);\n        cache.delete(a);\n        cache.delete(b);\n        return result;\n    };\n}\n/**\n * Get the properties to strictly examine, which include both own properties that are\n * not enumerable and symbol properties.\n */\nfunction getStrictProperties(object) {\n    return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));\n}\n/**\n * Whether the object contains the property passed as an own property.\n */\nvar hasOwn = Object.hasOwn ||\n    (function (object, property) {\n        return hasOwnProperty.call(object, property);\n    });\n/**\n * Whether the values passed are strictly equal or both NaN.\n */\nfunction sameValueZeroEqual(a, b) {\n    return a || b ? a === b : a === b || (a !== a && b !== b);\n}\n\nvar OWNER = '_owner';\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor, keys = Object.keys;\n/**\n * Whether the arrays are equal in value.\n */\nfunction areArraysEqual(a, b, state) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (!state.equals(a[index], b[index], index, index, a, b, state)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the dates passed are equal in value.\n */\nfunction areDatesEqual(a, b) {\n    return sameValueZeroEqual(a.getTime(), b.getTime());\n}\n/**\n * Whether the `Map`s are equal in value.\n */\nfunction areMapsEqual(a, b, state) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    var matchedIndices = {};\n    var aIterable = a.entries();\n    var index = 0;\n    var aResult;\n    var bResult;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.entries();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            var _a = aResult.value, aKey = _a[0], aValue = _a[1];\n            var _b = bResult.value, bKey = _b[0], bValue = _b[1];\n            if (!hasMatch &&\n                !matchedIndices[matchIndex] &&\n                (hasMatch =\n                    state.equals(aKey, bKey, index, matchIndex, a, b, state) &&\n                        state.equals(aValue, bValue, aKey, bKey, a, b, state))) {\n                matchedIndices[matchIndex] = true;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n        index++;\n    }\n    return true;\n}\n/**\n * Whether the objects are equal in value.\n */\nfunction areObjectsEqual(a, b, state) {\n    var properties = keys(a);\n    var index = properties.length;\n    if (keys(b).length !== index) {\n        return false;\n    }\n    var property;\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        property = properties[index];\n        if (property === OWNER &&\n            (a.$$typeof || b.$$typeof) &&\n            a.$$typeof !== b.$$typeof) {\n            return false;\n        }\n        if (!hasOwn(b, property) ||\n            !state.equals(a[property], b[property], property, property, a, b, state)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the objects are equal in value with strict property checking.\n */\nfunction areObjectsEqualStrict(a, b, state) {\n    var properties = getStrictProperties(a);\n    var index = properties.length;\n    if (getStrictProperties(b).length !== index) {\n        return false;\n    }\n    var property;\n    var descriptorA;\n    var descriptorB;\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        property = properties[index];\n        if (property === OWNER &&\n            (a.$$typeof || b.$$typeof) &&\n            a.$$typeof !== b.$$typeof) {\n            return false;\n        }\n        if (!hasOwn(b, property)) {\n            return false;\n        }\n        if (!state.equals(a[property], b[property], property, property, a, b, state)) {\n            return false;\n        }\n        descriptorA = getOwnPropertyDescriptor(a, property);\n        descriptorB = getOwnPropertyDescriptor(b, property);\n        if ((descriptorA || descriptorB) &&\n            (!descriptorA ||\n                !descriptorB ||\n                descriptorA.configurable !== descriptorB.configurable ||\n                descriptorA.enumerable !== descriptorB.enumerable ||\n                descriptorA.writable !== descriptorB.writable)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the primitive wrappers passed are equal in value.\n */\nfunction arePrimitiveWrappersEqual(a, b) {\n    return sameValueZeroEqual(a.valueOf(), b.valueOf());\n}\n/**\n * Whether the regexps passed are equal in value.\n */\nfunction areRegExpsEqual(a, b) {\n    return a.source === b.source && a.flags === b.flags;\n}\n/**\n * Whether the `Set`s are equal in value.\n */\nfunction areSetsEqual(a, b, state) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    var matchedIndices = {};\n    var aIterable = a.values();\n    var aResult;\n    var bResult;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.values();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (!hasMatch &&\n                !matchedIndices[matchIndex] &&\n                (hasMatch = state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state))) {\n                matchedIndices[matchIndex] = true;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the TypedArray instances are equal in value.\n */\nfunction areTypedArraysEqual(a, b) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (a[index] !== b[index]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nvar ARGUMENTS_TAG = '[object Arguments]';\nvar BOOLEAN_TAG = '[object Boolean]';\nvar DATE_TAG = '[object Date]';\nvar MAP_TAG = '[object Map]';\nvar NUMBER_TAG = '[object Number]';\nvar OBJECT_TAG = '[object Object]';\nvar REG_EXP_TAG = '[object RegExp]';\nvar SET_TAG = '[object Set]';\nvar STRING_TAG = '[object String]';\nvar isArray = Array.isArray;\nvar isTypedArray = typeof ArrayBuffer === 'function' && ArrayBuffer.isView\n    ? ArrayBuffer.isView\n    : null;\nvar assign = Object.assign;\nvar getTag = Object.prototype.toString.call.bind(Object.prototype.toString);\n/**\n * Create a comparator method based on the type-specific equality comparators passed.\n */\nfunction createEqualityComparator(_a) {\n    var areArraysEqual = _a.areArraysEqual, areDatesEqual = _a.areDatesEqual, areMapsEqual = _a.areMapsEqual, areObjectsEqual = _a.areObjectsEqual, arePrimitiveWrappersEqual = _a.arePrimitiveWrappersEqual, areRegExpsEqual = _a.areRegExpsEqual, areSetsEqual = _a.areSetsEqual, areTypedArraysEqual = _a.areTypedArraysEqual;\n    /**\n     * compare the value of the two objects and return true if they are equivalent in values\n     */\n    return function comparator(a, b, state) {\n        // If the items are strictly equal, no need to do a value comparison.\n        if (a === b) {\n            return true;\n        }\n        // If the items are not non-nullish objects, then the only possibility\n        // of them being equal but not strictly is if they are both `NaN`. Since\n        // `NaN` is uniquely not equal to itself, we can use self-comparison of\n        // both objects, which is faster than `isNaN()`.\n        if (a == null ||\n            b == null ||\n            typeof a !== 'object' ||\n            typeof b !== 'object') {\n            return a !== a && b !== b;\n        }\n        var constructor = a.constructor;\n        // Checks are listed in order of commonality of use-case:\n        //   1. Common complex object types (plain object, array)\n        //   2. Common data values (date, regexp)\n        //   3. Less-common complex object types (map, set)\n        //   4. Less-common data values (promise, primitive wrappers)\n        // Inherently this is both subjective and assumptive, however\n        // when reviewing comparable libraries in the wild this order\n        // appears to be generally consistent.\n        // Constructors should match, otherwise there is potential for false positives\n        // between class and subclass or custom object and POJO.\n        if (constructor !== b.constructor) {\n            return false;\n        }\n        // `isPlainObject` only checks against the object's own realm. Cross-realm\n        // comparisons are rare, and will be handled in the ultimate fallback, so\n        // we can avoid capturing the string tag.\n        if (constructor === Object) {\n            return areObjectsEqual(a, b, state);\n        }\n        // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing\n        // the string tag or doing an `instanceof` check.\n        if (isArray(a)) {\n            return areArraysEqual(a, b, state);\n        }\n        // `isTypedArray()` works on all possible TypedArray classes, so we can avoid\n        // capturing the string tag or comparing against all possible constructors.\n        if (isTypedArray != null && isTypedArray(a)) {\n            return areTypedArraysEqual(a, b, state);\n        }\n        // Try to fast-path equality checks for other complex object types in the\n        // same realm to avoid capturing the string tag. Strict equality is used\n        // instead of `instanceof` because it is more performant for the common\n        // use-case. If someone is subclassing a native class, it will be handled\n        // with the string tag comparison.\n        if (constructor === Date) {\n            return areDatesEqual(a, b, state);\n        }\n        if (constructor === RegExp) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (constructor === Map) {\n            return areMapsEqual(a, b, state);\n        }\n        if (constructor === Set) {\n            return areSetsEqual(a, b, state);\n        }\n        // Since this is a custom object, capture the string tag to determing its type.\n        // This is reasonably performant in modern environments like v8 and SpiderMonkey.\n        var tag = getTag(a);\n        if (tag === DATE_TAG) {\n            return areDatesEqual(a, b, state);\n        }\n        if (tag === REG_EXP_TAG) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (tag === MAP_TAG) {\n            return areMapsEqual(a, b, state);\n        }\n        if (tag === SET_TAG) {\n            return areSetsEqual(a, b, state);\n        }\n        if (tag === OBJECT_TAG) {\n            // The exception for value comparison is custom `Promise`-like class instances. These should\n            // be treated the same as standard `Promise` objects, which means strict equality, and if\n            // it reaches this point then that strict equality comparison has already failed.\n            return (typeof a.then !== 'function' &&\n                typeof b.then !== 'function' &&\n                areObjectsEqual(a, b, state));\n        }\n        // If an arguments tag, it should be treated as a standard object.\n        if (tag === ARGUMENTS_TAG) {\n            return areObjectsEqual(a, b, state);\n        }\n        // As the penultimate fallback, check if the values passed are primitive wrappers. This\n        // is very rare in modern JS, which is why it is deprioritized compared to all other object\n        // types.\n        if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {\n            return arePrimitiveWrappersEqual(a, b, state);\n        }\n        // If not matching any tags that require a specific type of comparison, then we hard-code false because\n        // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:\n        //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only\n        //     comparison that can be made.\n        //   - For types that can be introspected, but rarely have requirements to be compared\n        //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common\n        //     use-cases (may be included in a future release, if requested enough).\n        //   - For types that can be introspected but do not have an objective definition of what\n        //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.\n        // In all cases, these decisions should be reevaluated based on changes to the language and\n        // common development practices.\n        return false;\n    };\n}\n/**\n * Create the configuration object used for building comparators.\n */\nfunction createEqualityComparatorConfig(_a) {\n    var circular = _a.circular, createCustomConfig = _a.createCustomConfig, strict = _a.strict;\n    var config = {\n        areArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areArraysEqual,\n        areDatesEqual: areDatesEqual,\n        areMapsEqual: strict\n            ? combineComparators(areMapsEqual, areObjectsEqualStrict)\n            : areMapsEqual,\n        areObjectsEqual: strict\n            ? areObjectsEqualStrict\n            : areObjectsEqual,\n        arePrimitiveWrappersEqual: arePrimitiveWrappersEqual,\n        areRegExpsEqual: areRegExpsEqual,\n        areSetsEqual: strict\n            ? combineComparators(areSetsEqual, areObjectsEqualStrict)\n            : areSetsEqual,\n        areTypedArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areTypedArraysEqual,\n    };\n    if (createCustomConfig) {\n        config = assign({}, config, createCustomConfig(config));\n    }\n    if (circular) {\n        var areArraysEqual$1 = createIsCircular(config.areArraysEqual);\n        var areMapsEqual$1 = createIsCircular(config.areMapsEqual);\n        var areObjectsEqual$1 = createIsCircular(config.areObjectsEqual);\n        var areSetsEqual$1 = createIsCircular(config.areSetsEqual);\n        config = assign({}, config, {\n            areArraysEqual: areArraysEqual$1,\n            areMapsEqual: areMapsEqual$1,\n            areObjectsEqual: areObjectsEqual$1,\n            areSetsEqual: areSetsEqual$1,\n        });\n    }\n    return config;\n}\n/**\n * Default equality comparator pass-through, used as the standard `isEqual` creator for\n * use inside the built comparator.\n */\nfunction createInternalEqualityComparator(compare) {\n    return function (a, b, _indexOrKeyA, _indexOrKeyB, _parentA, _parentB, state) {\n        return compare(a, b, state);\n    };\n}\n/**\n * Create the `isEqual` function used by the consuming application.\n */\nfunction createIsEqual(_a) {\n    var circular = _a.circular, comparator = _a.comparator, createState = _a.createState, equals = _a.equals, strict = _a.strict;\n    if (createState) {\n        return function isEqual(a, b) {\n            var _a = createState(), _b = _a.cache, cache = _b === void 0 ? circular ? new WeakMap() : undefined : _b, meta = _a.meta;\n            return comparator(a, b, {\n                cache: cache,\n                equals: equals,\n                meta: meta,\n                strict: strict,\n            });\n        };\n    }\n    if (circular) {\n        return function isEqual(a, b) {\n            return comparator(a, b, {\n                cache: new WeakMap(),\n                equals: equals,\n                meta: undefined,\n                strict: strict,\n            });\n        };\n    }\n    var state = {\n        cache: undefined,\n        equals: equals,\n        meta: undefined,\n        strict: strict,\n    };\n    return function isEqual(a, b) {\n        return comparator(a, b, state);\n    };\n}\n\n/**\n * Whether the items passed are deeply-equal in value.\n */\nvar deepEqual = createCustomEqual();\n/**\n * Whether the items passed are deeply-equal in value based on strict comparison.\n */\nvar strictDeepEqual = createCustomEqual({ strict: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references.\n */\nvar circularDeepEqual = createCustomEqual({ circular: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularDeepEqual = createCustomEqual({\n    circular: true,\n    strict: true,\n});\n/**\n * Whether the items passed are shallowly-equal in value.\n */\nvar shallowEqual = createCustomEqual({\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value based on strict comparison\n */\nvar strictShallowEqual = createCustomEqual({\n    strict: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references.\n */\nvar circularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n    strict: true,\n});\n/**\n * Create a custom equality comparison method.\n *\n * This can be done to create very targeted comparisons in extreme hot-path scenarios\n * where the standard methods are not performant enough, but can also be used to provide\n * support for legacy environments that do not support expected features like\n * `RegExp.prototype.flags` out of the box.\n */\nfunction createCustomEqual(options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.circular, circular = _a === void 0 ? false : _a, createCustomInternalComparator = options.createInternalComparator, createState = options.createState, _b = options.strict, strict = _b === void 0 ? false : _b;\n    var config = createEqualityComparatorConfig(options);\n    var comparator = createEqualityComparator(config);\n    var equals = createCustomInternalComparator\n        ? createCustomInternalComparator(comparator)\n        : createInternalEqualityComparator(comparator);\n    return createIsEqual({ circular: circular, comparator: comparator, createState: createState, equals: equals, strict: strict });\n}\n\nexport { circularDeepEqual, circularShallowEqual, createCustomEqual, deepEqual, sameValueZeroEqual, shallowEqual, strictCircularDeepEqual, strictCircularShallowEqual, strictDeepEqual, strictShallowEqual };\n//# sourceMappingURL=index.mjs.map\n","/* eslint-disable @typescript-eslint/ban-types, @typescript-eslint/naming-convention */\nimport { deepEqual } from 'fast-equals'\nimport { css, html, LitElement } from 'lit'\nimport { customElement, property, query } from 'lit/decorators'\n\nimport { MiniNodeType } from './MiniNode'\nimport { px } from './utils'\n\n@customElement('minimap-component')\nexport class Minimap extends LitElement {\n    @property({ type: Number }) size = 200\n    @property({ type: Number }) ratio = 1\n    @property({\n      type: Array,\n      hasChanged: (newVal: MiniNodeType[], oldVal: MiniNodeType[]) => {\n        return !deepEqual(newVal, oldVal)\n      }\n    })\n      nodes: MiniNodeType[] | undefined\n    @property({ type: Object }) viewport: any\n    @property({ type: Function }) reTranslate = () => {\n      throw new Error('reTranslate not set properly')\n    }\n    @property({ type: Function }) point = (_x: number, _y: number) => {\n      throw new Error('point not defined Properly')\n    }\n    @property({ type: Number }) seed: number | undefined\n\n    @query('.minimap') container: HTMLElement | undefined\n\n    static styles = css`\n        .minimap {\n            position: absolute;\n            right: 24px;\n            bottom: 24px;\n            background: rgba(229, 234, 239, 0.65);\n            padding: 20px;\n            overflow: hidden;\n            border: 1px solid #b1b7ff;\n            border-radius: 8px;\n            box-sizing: border-box;\n        }\n    `\n\n    render() {\n      return html`\n            <div\n                class=\"minimap\"\n                style=\"width: ${px(this.size * this.ratio)}; height: ${px(\n  this.size\n)}\"\n                @pointerdown=\"${this.stopEvent}\"\n                @dblclick=\"${this.dblclick}\"\n                data-testid=\"minimap\"\n            >\n                ${this.nodes?.map(\n    (node) => html`\n                        <mini-node\n                            .left=\"${this.scale(node.left)}\"\n                            .top=\"${this.scale(node.top)}\"\n                            .width=\"${this.scale(node.width)}\"\n                            .height=\"${this.scale(node.height)}\"\n                        ></mini-node>\n                    `\n  )}\n                <mini-viewport\n                    .left=\"${this.viewport.left}\"\n                    .top=\"${this.viewport.top}\"\n                    .width=\"${this.viewport.width}\"\n                    .height=\"${this.viewport.height}\"\n                    .containerWidth=\"${this.container &&\n                    this.container.clientWidth}\"\n                    .reTranslate=\"${this.reTranslate}\"\n                ></mini-viewport>\n            </div>\n        `\n    }\n\n    stopEvent(e: Event) {\n      e.stopPropagation()\n      e.preventDefault()\n    }\n\n    dblclick(e: MouseEvent) {\n      if (!this.container) return\n      const box = this.container.getBoundingClientRect()\n      const x = (e.clientX - box.left) / (this.size * this.ratio)\n      const y = (e.clientY - box.top) / (this.size * this.ratio)\n\n      this.point?.(x, y)\n    }\n\n    scale(value: number) {\n      if (!this.container) return 0\n\n      return value * this.container.clientWidth\n    }\n}\n","import './MiniNode'\nimport './MiniViewport'\n\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Minimap } from './Minimap'\nimport { MinimapRender } from './types'\n\nexport function setup<Schemes extends BaseSchemes, K extends MinimapRender>(props?: { size?: number }): RenderPreset<Schemes, K> {\n  return {\n    update(context) {\n      if (context.data.type === 'minimap') {\n        return {\n          nodes: context.data.nodes,\n          size: props?.size || 200,\n          ratio: context.data.ratio,\n          viewport: context.data.viewport,\n          reTranslate: context.data.translate,\n          point: context.data.point\n        }\n      }\n    },\n    render(context) {\n      if (context.data.type === 'minimap') {\n        return {\n          component: Minimap,\n          props: {\n            nodes: context.data.nodes,\n            size: props?.size || 200,\n            ratio: context.data.ratio,\n            viewport: context.data.viewport,\n            reTranslate: context.data.translate,\n            point: context.data.point\n          }\n        }\n      }\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\n\nimport { Pin } from './types'\n\n@customElement('pins-component')\nexport class Pins extends LitElement {\n  @property({ type: Array }) pins: Pin[] = []\n  @property({ type: Function }) menu = (_id: string) => {throw new Error('menu not set properly')}\n  @property({ type: Function }) reTranslate = (_id: string, _dx: number, _dy: number) => {throw new Error('reTranslate not set properly')}\n  @property({ type: Function }) down = (_id: string) => {throw new Error('down not set properly')}\n  @property({ type: Function }) getPointer = () => {throw new Error('getPointer not set properly')}\n\n  static styles = css`\n    :host {\n      display: block;\n    }\n  `\n\n  render() {\n    return html`\n      ${this.pins.map(\n    pin => html`\n          <pin-component\n            .position=${pin.position}\n            .selected=${pin.selected}\n            .getPointer=${this.getPointer}\n            @menu=${() => this.menu(pin.id)}\n            @translate=${(e: CustomEvent) => this.reTranslate(pin.id, e.detail.dx, e.detail.dy)}\n            @down=${() => this.down(pin.id)}\n          ></pin-component>\n        `\n  )}\n    `\n  }\n}\n","import { BaseSchemes } from 'rete'\nimport { BaseAreaPlugin } from 'rete-area-plugin'\n\nimport { RenderPreset } from '../types'\nimport { Pins } from './Pins'\nimport { PinsRender } from './types'\n\ntype Props = {\n  translate?: (id: string, dx: number, dy: number) => void\n  contextMenu?: (id: string) => void\n  pointerdown?: (id: string) => void\n}\n\n/**\n * Preset for rendering pins.\n */\nexport function setup<Schemes extends BaseSchemes, K extends PinsRender>(props?: Props): RenderPreset<Schemes, K> {\n  const getProps = () => ({\n    menu: props?.contextMenu || (() => null),\n    translate: props?.translate || (() => null),\n    down: props?.pointerdown || (() => null)\n  })\n\n  return {\n    update(context) {\n      if (context.data.type === 'reroute-pins') {\n        return {\n          ...getProps(),\n          pins: context.data.data.pins\n        }\n      }\n    },\n    render(context, plugin) {\n      if (context.data.type === 'reroute-pins') {\n        const area = plugin.parentScope<BaseAreaPlugin<Schemes, PinsRender>>(BaseAreaPlugin)\n\n        return {\n          component: Pins,\n          props: {\n            ...getProps(),\n            getPointer: () => area.area.pointer,\n            pins: context.data.data.pins\n          }\n        }\n      }\n    }\n  }\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        !subscription.closed && subscriber.next(this._value);\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;\n        if (hasError) {\n            throw thrownError;\n        }\n        this._throwIfClosed();\n        return _value;\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, (this._value = value));\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// import * as Ajv from 'ajv'\n// import { JSONSchemaFaker } from 'json-schema-faker'\nimport { css, html, LitElement } from 'lit'\nimport { property } from 'lit/decorators'\nimport { ClassicPreset } from 'rete'\nimport { BehaviorSubject, Subscription } from 'rxjs'\n\n// const ajv = new Ajv()\n\ntype IODefinition = {\n    label: string;\n    schema?: object;\n    subject?: BehaviorSubject<any>;\n    validate?: (outputDef: IODefinition) => boolean;\n    subscription?: Subscription;\n    socket?: ClassicPreset.Socket\n}\n\ntype IntermediateDefinition = {\n    label: string;\n    operator: any;\n}\n\ntype ContextData = {\n    id: string;\n    source: string;\n    sourceOutput: string;\n    target: string;\n    targetInput: string;\n}\n\ntype Context = {\n    type: string;\n    data: ContextData;\n}\n\nexport class Transformer extends LitElement {\n  static socket = new ClassicPreset.Socket('socket')\n  static inputs: IODefinition[] = []\n  static outputs: IODefinition[] = []\n  static intermediates: IntermediateDefinition[] = []\n  static styles = css`\n        :host {\n            min-width: 100px;\n            min-height: 100px;\n            display: block;\n        }\n    `\n\n    @property({ attribute: 'node-id', type: String })\n      nodeId!: string\n    @property({ type: Boolean })\n      selected!: boolean\n\n    inputs: { [label: string]: IODefinition } = {}\n    outputs: { [label: string]: IODefinition } = {}\n    intermediates: { [label: string]: IntermediateDefinition } = {}\n\n    constructor(private editor: any) {\n      super()\n      this.processIO(\n        (this.constructor as typeof Transformer).inputs,\n        this.inputs\n      )\n      this.processIO(\n        (this.constructor as typeof Transformer).outputs,\n        this.outputs\n      )\n      this.processIntermediates(\n        (this.constructor as typeof Transformer).intermediates\n      )\n      this.transform() // Set up the internal pipeline\n\n      // Subscribe to the editor's pipe events\n      this.editor.addPipe((context: Context) => {\n        if (context.type === 'connectioncreated') {\n          try {\n            if (context.data.target === this.nodeId) {\n              this.subscribe(context.data)\n            }\n          } catch (error) {\n            alert((error as Error).message)\n            this.editor.removeConnection(context.data.id)\n          }\n        } else if (context.type === 'connectionremoved') {\n          this.unsubscribe(context.data)\n        }\n      })\n    }\n\n    processIO(\n      definitions: IODefinition[],\n      ioObject: { [label: string]: IODefinition }\n    ) {\n      for (const def of definitions) {\n        const subject = new BehaviorSubject(null)\n\n        subject.subscribe(() => this.requestUpdate())\n        ioObject[def.label] = {\n          ...def,\n          subject,\n          socket: (this.constructor as typeof Transformer).socket,\n          validate: this.createValidateFunction(def)\n        }\n      }\n    }\n\n    createValidateFunction(inputDef: IODefinition) {\n      return (outputDef: IODefinition) => {\n        if (!inputDef.schema) return true\n        if (!outputDef.schema) return false\n\n        return true\n        // Generate a sample object that complies with the output schema\n        // const sampleOutput = JSONSchemaFaker.generate(outputDef.schema as any)\n\n        // // Validate the sample object against the input schema\n        // const validateInput = ajv.compile(inputDef.schema)\n\n        // return !!validateInput(sampleOutput)\n      }\n    }\n\n    processIntermediates(list: IntermediateDefinition[]) {\n      for (const item of list) {\n        this.intermediates[item.label] = item\n      }\n    }\n\n    // To be overridden by child class\n    // eslint-disable-next-line\n    transform() {}\n\n    render() {\n      return html``\n    }\n\n    subscribe(context: ContextData) {\n      if (context.target !== this.nodeId) return\n\n      const sourceNode = this.editor.getNode(context.source)\n      const sourceOutput = sourceNode.outputs[context.sourceOutput]\n      const targetInput = this.inputs[context.targetInput]\n\n      // Check if the input already has a subscription\n      if (targetInput.subscription) {\n        throw new Error('Input already has a subscription.')\n      }\n\n      // Validate the schema\n      if (!targetInput.validate!(sourceOutput)) {\n        throw new Error('Schema validation failed.')\n      }\n\n      // Subscribe the input to the output\n      targetInput.subscription = sourceOutput.subject.subscribe(\n        (value: any) => {\n                targetInput.subject!.next(value)\n        }\n      )\n    }\n\n    unsubscribe(context: ContextData) {\n      if (context.target !== this.nodeId) return\n\n      const targetInput = this.inputs[context.targetInput]\n\n      // Unsubscribe the input\n      if (targetInput.subscription) {\n        targetInput.subscription.unsubscribe()\n        delete targetInput.subscription\n      }\n    }\n}\n","import { css, html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators'\n\nimport vars from '../vars'\nimport { Transformer } from './Transformer'\n\n@customElement('transformer-node')\nexport class TransformerNode extends LitElement {\n    @property({ type: Object })\n  get data(): Transformer | undefined {\n    return this._data\n  }\n    set data(val: Transformer | undefined) {\n      const oldVal = this._data\n\n      this._data = val\n      if (val && !oldVal) {\n        this.appendChild(val)\n      }\n      this.requestUpdate('data', oldVal)\n    }\n    @property({ type: Function }) emit = () => {\n      throw new Error('emit not set properly')\n    }\n    @property({ type: String }) seed = ''\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private _data: Transformer | undefined\n\n    static styles = [\n      vars,\n      css`\n            :host {\n                display: block;\n            }\n\n            .node {\n                display: flex;\n                flex-direction: column;\n                background: var(--node-color);\n                border: 2px solid #4e58bf;\n                border-radius: 10px;\n                cursor: pointer;\n                box-sizing: border-box;\n                width: var(--node-width);\n                height: auto;\n                padding-bottom: 6px;\n                position: relative;\n                user-select: none;\n            }\n\n            .inputs,\n            .outputs {\n                display: flex;\n                flex-direction: row;\n            }\n\n            .inputs .input-socket {\n                margin-top: calc(\n                    (var(--socket-size) / -2) - var(--socket-margin)\n                );\n            }\n\n            .outputs .output-socket {\n                margin-bottom: calc(\n                    (var(--socket-size) / -2) - var(--socket-margin)\n                );\n            }\n\n            .input {\n                display: flex;\n                flex-direction: column;\n            }\n\n            .output {\n                display: flex;\n                flex-direction: column-reverse;\n            }\n\n            /* You can add other CSS rules here as needed */\n        `\n    ]\n\n    render() {\n      return html`\n            <div class=\"node\">\n                <div class=\"inputs\">\n                    ${Object.entries(this.data?.inputs || {}).map(\n    ([key, input]) => html`\n                            <div class=\"input\">\n                                <ref-element\n                                    class=\"input-socket\"\n                                    .emit=${this.emit}\n                                    .data=${{\n    type: 'socket',\n    side: 'input',\n    key: key,\n    nodeId: this.data?.nodeId,\n    payload: input.socket\n  }}\n                                ></ref-element>\n                                <div class=\"input-title\">${input.label}</div>\n                            </div>\n                        `\n  )}\n                </div>\n\n                <slot></slot>\n\n                <div class=\"outputs\">\n                    ${Object.entries(this.data?.outputs || {}).map(\n    ([key, output]) => html`\n                            <div class=\"output\">\n                                <div class=\"output-title\">${output.label}</div>\n                                <ref-element\n                                    class=\"output-socket\"\n                                    .emit=${this.emit}\n                                    .data=${{\n    type: 'socket',\n    side: 'output',\n    key: key,\n    nodeId: this.data?.nodeId,\n    payload: output.socket\n  }}\n                                ></ref-element>\n                            </div>\n                        `\n  )}\n                </div>\n            </div>\n        `\n    }\n}\n","/* eslint-disable @typescript-eslint/ban-types  */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { css, html, LitElement } from 'lit'\nimport { customElement, property, query } from 'lit/decorators'\n\n@customElement('ref-element')\nexport class RefElement extends LitElement {\n    @property({ type: Object }) data = {}\n    @property({ type: Function }) emit = (_payload: Object) => {\n      throw new Error('emit not set properly')\n    }\n\n    @query('#element') element: HTMLElement | undefined\n\n    originalElementsFromPoint = document.elementsFromPoint.bind(document)\n\n    updated() {\n      this.emit({\n        type: 'render',\n        data: { ...this.data, element: this.element }\n      })\n    }\n\n    disconnectedCallback() {\n      this.emit({ type: 'unmount', data: { element: this.element } })\n      super.disconnectedCallback()\n    }\n\n    handlePointerDown() {\n      // Stash original function\n      const originalElementsFromPoint = this.originalElementsFromPoint\n\n      // Monkey patch\n      document.elementsFromPoint = function (x, y) {\n        const elements = originalElementsFromPoint(x, y)\n        let shadowElements: Element[] = []\n\n        let shadowRoot = elements[0].shadowRoot\n        let d = 0\n\n        while (shadowRoot) {\n          const innerElements: Element[] = shadowRoot.elementsFromPoint(x, y)\n\n          d++\n          shadowElements = innerElements.concat(shadowElements)\n          shadowRoot = innerElements[0]?.shadowRoot // Only check the shadow root of the first element\n          if (d > 5) break\n        }\n\n        return Array.from(new Set(shadowElements.concat(elements)))\n      }\n\n      // eslint-disable-next-line\n        console.log(\"ref pointerdown\");\n    }\n\n    handlePointerUp() {\n      // Restore original function after a setImmediate\n      setTimeout(() => {\n        document.elementsFromPoint = this.originalElementsFromPoint\n      }, 0)\n\n      // eslint-disable-next-line\n        console.log(\"ref pointerup\");\n    }\n\n    render() {\n      return html`<div\n            id=\"element\"\n            @pointerdown=\"${this.handlePointerDown}\"\n            @pointerup=\"${this.handlePointerUp}\"\n            .data=${this.data}\n        ></div>`\n    }\n\n    static styles = css`\n        /* Add your styles here */\n    `\n}\n","import { BaseSchemes, CanAssignSignal, Scope } from 'rete'\n\nimport { RenderPreset } from './presets/types'\nimport { getRenderer, Renderer } from './renderer'\nimport { Position, RenderSignal } from './types'\n\nexport * as Presets from './presets'\nexport { Transformer } from './presets/classic/components/Transformer'\nexport { TransformerNode } from './presets/classic/components/TransformerNode'\nexport type { ClassicScheme, LitArea2D } from './presets/classic/types'\nexport type { RenderPreset } from './presets/types'\nexport { RefElement as Ref } from './Ref'\n\nexport type Produces<Schemes extends BaseSchemes> =\n  | { type: 'connectionpath', data: { payload: Schemes['Connection'], path?: string, points: Position[] } }\n\ntype Requires<Schemes extends BaseSchemes> =\n  | RenderSignal<'node', { payload: Schemes['Node'] }>\n  | RenderSignal<'connection', { payload: Schemes['Connection'], start?: Position, end?: Position }>\n  | { type: 'unmount', data: { element: HTMLElement } }\n\nexport class LitPlugin<Schemes extends BaseSchemes, T = Requires<Schemes>> extends Scope<Produces<Schemes>, [Requires<Schemes> | T]> {\n  renderer: Renderer<unknown>\n  presets: RenderPreset<Schemes, T>[] = []\n  owners = new WeakMap<HTMLElement, RenderPreset<Schemes, T>>()\n\n  constructor() {\n    super('lit-render')\n    this.renderer = getRenderer()\n\n    this.addPipe(context => {\n      if (!context || typeof context !== 'object' || !('type' in context)) return context\n\n      if (context.type === 'unmount') {\n        this.unmount(context.data.element)\n      } else if (context.type === 'render') {\n        if ('filled' in context.data && context.data.filled) {\n          return context\n        }\n        if (this.mount(context.data.element, context as T)) {\n          return {\n            ...context,\n            data: {\n              ...context.data,\n              filled: true\n            }\n          } as typeof context\n        }\n      }\n\n      return context\n    })\n  }\n\n  setParent(scope: Scope<Requires<Schemes> | T>): void {\n    super.setParent(scope)\n\n    this.presets.forEach(preset => {\n      if (preset.attach) preset.attach(this)\n    })\n  }\n\n  private unmount(element: HTMLElement) {\n    this.owners.delete(element)\n    this.renderer.unmount(element)\n  }\n\n  private mount(element: HTMLElement, context: T) {\n    const existing = this.renderer.get(element)\n    const parent = this.parentScope()\n\n    if (existing) {\n      this.presets.forEach(preset => {\n        if (this.owners.get(element) !== preset) return\n        const result = preset.update(context as Extract<T, { type: 'render' }>, this)\n\n        if (result) {\n          this.renderer.update(existing, result)\n        }\n      })\n      return true\n    }\n\n    for (const preset of this.presets) {\n      const result = preset.render(context as Extract<T, { type: 'render' }>, this)\n\n      if (!result) continue\n\n      this.renderer.mount(\n        element,\n        result.component,\n        result.props!,\n        () => parent?.emit({ type: 'rendered', data: (context as Requires<Schemes>).data } as T)\n      )\n\n      this.owners.set(element, preset)\n      return true\n    }\n  }\n\n  public addPreset<K>(preset: RenderPreset<Schemes, CanAssignSignal<T, K> extends true ? K : 'Cannot apply preset. Provided signals are not compatible'>) {\n    const local = preset as RenderPreset<Schemes, T>\n\n    if (local.attach) local.attach(this)\n    this.presets.push(local)\n  }\n}\n"],"names":["setProps","element","payload","_i","_Object$keys","Object","keys","length","key","getRenderer","instances","Map","get","mount","litComponent","onRendered","app","component","state","addEventListener","appendChild","create","set","update","instance","_objectSpread","requestUpdate","unmount","remove","Connection","_decorate","customElement","_initialize","_LitElement","_LitElement2","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","args","Array","_key","call","apply","this","concat","_assertThisInitialized","_createClass","F","d","kind","decorators","property","type","value","String","static","css","_templateObject","_taggedTemplateLiteral","html","_templateObject2","path","LitElement","ConnectionWrapper","_fetchPath","Function","Error","x","y","_get","_getPrototypeOf","prototype","initializeWatchers","fetchPath","onDestroy","_this2","unwatch1","start","pos","observedStart","unwatch2","end","observedEnd","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","startPosition","endPosition","observedPath","sent","stop","dynamicComponent","data","vars$1","Control","ClassicPreset","InputControl","vars","_this$data","_this$data2","_this$data3","readonly","change","stopEvent","e","_this$data4","_e$target","_e$target2","_this$data5","val","target","setValue","stopPropagation","sortByIndex","entries","undefined","sort","a","b","index","customElements","define","Node","width","height","inputs","controls","outputs","_this$data6","_this$data7","selected","nodeStyles","label","map","_ref","_this2$data","_ref2","_slicedToArray","output","_templateObject3","side","nodeId","id","socket","emit","_ref3","_ref4","control","_templateObject4","_ref5","_this2$data2","_ref6","input","_templateObject5","showControl","Socket","console","log","name","handleClick","props","positionWatcher","socketPositionWatcher","getDOMSocketPosition","customize","node","connection","attach","plugin","context","parent","parentScope","bind","_context$data","render","_path","source","sourceOutput","targetInput","listen","response","_response$data","points","curvature","abrupt","isLoop","loopConnectionPath","classicConnectionPath","_x","_x2","debounce","delay","cb","timeout","cancel","window","clearTimeout","setTimeout","Block","Item","hide","hideSubitems","Number","Boolean","visibleSubitems","subitems","event","dispatchEvent","CustomEvent","detail","item","handler","Search","text","handleInput","Menu","onHide","filterRegexp","RegExp","filter","items","match","searchBar","getItems","px","MiniNode","left","top","styleMap","styles","MiniViewport","_y","translate","onDrag","getPointer","pageX","pageY","previous","move","moveEvent","current","dx","dy","up","removeEventListener","v","containerWidth","reTranslate","invert","scale","drag","getOwnPropertyNames","getOwnPropertySymbols","hasOwnProperty","combineComparators","comparatorA","comparatorB","createIsCircular","areItemsEqual","cache","cachedA","cachedB","result","delete","getStrictProperties","object","hasOwn","sameValueZeroEqual","OWNER","getOwnPropertyDescriptor","areArraysEqual","equals","areDatesEqual","getTime","areMapsEqual","size","aResult","bResult","matchedIndices","aIterable","done","bIterable","hasMatch","matchIndex","_a","aKey","aValue","_b","bKey","bValue","areObjectsEqual","properties","$$typeof","areObjectsEqualStrict","descriptorA","descriptorB","configurable","enumerable","writable","arePrimitiveWrappersEqual","valueOf","areRegExpsEqual","flags","areSetsEqual","values","areTypedArraysEqual","ARGUMENTS_TAG","BOOLEAN_TAG","DATE_TAG","MAP_TAG","NUMBER_TAG","OBJECT_TAG","REG_EXP_TAG","SET_TAG","STRING_TAG","isArray","isTypedArray","ArrayBuffer","isView","assign","getTag","toString","deepEqual","createCustomEqual","options","compare","circular","createCustomInternalComparator","createInternalComparator","createState","strict","config","createCustomConfig","areArraysEqual$1","areMapsEqual$1","areObjectsEqual$1","areSetsEqual$1","createEqualityComparatorConfig","comparator","constructor","Date","Set","tag","then","createEqualityComparator","WeakMap","meta","createIsEqual","_indexOrKeyA","_indexOrKeyB","_parentA","_parentB","Minimap","hasChanged","newVal","oldVal","query","_this$nodes","ratio","dblclick","nodes","viewport","container","clientWidth","preventDefault","_this$point","box","getBoundingClientRect","clientX","clientY","point","Pins","_id","_dx","_dy","pins","pin","position","menu","down","getProps","contextMenu","pointerdown","area","BaseAreaPlugin","pointer","extendStatics","setPrototypeOf","__proto__","p","__extends","TypeError","__","__values","o","s","Symbol","iterator","m","i","__read","n","r","ar","push","error","__spreadArray","to","from","pack","l","slice","isFunction","createErrorClass","createImpl","ctorFunc","stack","UnsubscriptionError","errors","message","err","join","arrRemove","arr","indexOf","splice","Subscription","initialTeardown","closed","_parentage","_finalizers","empty","unsubscribe","e_1","e_2","_parentage_1","_parentage_1_1","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","add","teardown","_hasParent","_addParent","includes","_removeParent","EMPTY","EMPTY_SUBSCRIPTION","isSubscription","onUnhandledError","onStoppedNotification","Promise","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","delegate","handle","noop","errorContext","isRoot","errorThrown","Subscriber","destination","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","_next","_error","_complete","_bind","fn","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","observable","identity","Observable","subscribe","_subscribe","lift","operator","subscriber","isObserver","_trySubscribe","sink","forEach","promiseCtor","getPromiseCtor","resolve","reject","Symbol_observable","pipe","fns","operations","reduce","toPromise","ObjectUnsubscribedError","Subject","currentObservers","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","_c","shift","defineProperty","_checkFinalizedStatuses","_innerSubscribe","asObservable","BehaviorSubject","_value","getValue","subscription","Transformer","editor","processIO","processIntermediates","intermediates","transform","addPipe","alert","removeConnection","attribute","definitions","ioObject","_step","_iterator","_createForOfIteratorHelper","def","validate","createValidateFunction","f","inputDef","outputDef","schema","list","_step2","_iterator2","getNode","TransformerNode","_data","RefElement","_payload","document","elementsFromPoint","originalElementsFromPoint","elements","shadowElements","shadowRoot","_innerElements$","innerElements","handlePointerDown","handlePointerUp","LitPlugin","_Scope","_defineProperty","renderer","_typeof","filled","scope","presets","preset","owners","_this3","existing","local","Scope"],"mappings":"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"}